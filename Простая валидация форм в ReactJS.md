<div class="col-sm-8 content">
   <h1>Простая валидация форм в ReactJS</h1>
<hr class="divider">
<p class="blog-post-meta">
<span class="date"></span>
<span class="taglinks">
 <a href="/?tags=react">react</a>
<a href="/?tags=javascript">javascript</a>
</span>

</p>
<p><img class="img-responsive" title="Валидация форм в ReactJS | How to do Simple Form Validation in Reactjs" src="http://www.kanby.ru/assets/images/medium/1-BEuqwbh5tAOL0jhQfqVasg.png" alt="Валидация форм в ReactJS | How to do Simple Form Validation in Reactjs" width="100%"></p>
<p class="graf graf--p">Это пошаговое руководство покажет как сделать базовую проверку введенных данных в форму созданной с помощью React.</p>
<p class="graf graf--p">Полный <a class="markup--anchor markup--p-anchor" rel="noopener" href="https://github.com/learnetto/react-form-validation-demo" target="_blank">код можно посмотреть здесь</a> и <a class="markup--anchor markup--p-anchor" rel="noopener" href="https://reactform.herokuapp.com/" target="_blank">запустить приложение в Heroku</a>.</p>
<p class="graf graf--p">Мы будем использовать <a class="markup--anchor markup--p-anchor" rel="noopener" href="https://github.com/facebookincubator/create-react-app" target="_blank"><strong class="markup--strong markup--p-strong">create-react-app</strong></a><strong class="markup--strong markup--p-strong"> </strong>для создания и запуска просто приложения с использованием React.</p>
<p class="graf graf--p">Установим пакеты и создадим новое приложение:</p>
<pre class="prettyprint prettyprinted"><span class="pln">$ npm install </span><span class="pun">-</span><span class="pln">g create</span><span class="pun">-</span><span class="pln">react</span><span class="pun">-</span><span class="pln">app </span><br><span class="pln">$ create</span><span class="pun">-</span><span class="pln">react</span><span class="pun">-</span><span class="pln">app react</span><span class="pun">-</span><span class="pln">form</span><span class="pun">-</span><span class="pln">validation</span><span class="pun">-</span><span class="pln">demo</span></pre>
<p class="graf graf--p">Запустим приложение:</p>
<pre class="prettyprint prettyprinted"><span class="pln">$ cd react</span><span class="pun">-</span><span class="pln">form</span><span class="pun">-</span><span class="pln">validation</span><span class="pun">-</span><span class="pln">demo</span><span class="pun">/</span><br><span class="pln">$ npm start</span></pre>
<p class="graf graf--p">Откроем созданное приложение по ссылке <a class="markup--anchor markup--p-anchor" href="http://localhost:3000/" target="_blank"><strong class="markup--strong markup--p-strong">http://localhost:3000/</strong></a></p>
<p class="graf graf--p">Подключим Bootstrap для удобной стилизации будущей формы:</p>
<pre class="prettyprint prettyprinted"><span class="pln">$ npm install react</span><span class="pun">-</span><span class="pln">bootstrap </span><span class="pun">—</span><span class="pln"> save </span><br><span class="pln">$ npm install bootstrap@3 </span><span class="pun">—</span><span class="pln"> save</span></pre>
<p class="graf graf--p">В начале файла <strong class="markup--strong markup--p-strong">src/index.js </strong>импортируем файл стилей CSS Bootstrap и, опционально, тему Bootstrap:</p>
<pre class="prettyprint prettyprinted"><span class="kwd">import</span><span class="pln"> </span><span class="pun">‘</span><span class="pln">bootstrap</span><span class="pun">/</span><span class="pln">dist</span><span class="pun">/</span><span class="pln">css</span><span class="pun">/</span><span class="pln">bootstrap</span><span class="pun">.</span><span class="pln">css</span><span class="pun">’;</span><span class="pln"> </span><br><span class="kwd">import</span><span class="pln"> </span><span class="pun">‘</span><span class="pln">bootstrap</span><span class="pun">/</span><span class="pln">dist</span><span class="pun">/</span><span class="pln">css</span><span class="pun">/</span><span class="pln">bootstrap</span><span class="pun">-</span><span class="pln">theme</span><span class="pun">.</span><span class="pln">css</span><span class="pun">’;</span></pre>
<p class="graf graf--p">Хорошо. Теперь построим основу нашего приложения—добавим компонент Form.</p>
<p class="graf graf--p">В <strong class="markup--strong markup--p-strong">src/App.js </strong>заменяем первоначальную разметку с помощью компонента Form, который вскоре создадим. Также необходимо сделать импорт компонента:</p>
<pre class="prettyprint prettyprinted"><span class="kwd">import</span><span class="pln"> </span><span class="typ">React</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">Component</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'react'</span><span class="pun">;</span><br><span class="kwd">import</span><span class="pln"> logo </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./logo.svg'</span><span class="pun">;</span><br><span class="kwd">import</span><span class="pln"> </span><span class="str">'./App.css'</span><span class="pun">;</span><br><span class="kwd">import</span><span class="pln"> </span><span class="typ">Form</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./Form.js'</span><span class="pun">;</span></pre>
<pre class="prettyprint prettyprinted"><span class="kwd">class</span><span class="pln"> </span><span class="typ">App</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Component</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">  render</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><br><span class="pln">      </span><span class="pun">&lt;</span><span class="pln">div className</span><span class="pun">=</span><span class="str">"App"</span><span class="pun">&gt;</span><br><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">div className</span><span class="pun">=</span><span class="str">"App-header"</span><span class="pun">&gt;</span><br><span class="pln">          </span><span class="pun">&lt;</span><span class="pln">img src</span><span class="pun">={</span><span class="pln">logo</span><span class="pun">}</span><span class="pln"> className</span><span class="pun">=</span><span class="str">"App-logo"</span><span class="pln"> alt</span><span class="pun">=</span><span class="str">"logo"</span><span class="pln"> </span><span class="pun">/&gt;</span><br><span class="pln">          </span><span class="str">&lt;h2&gt;</span><span class="typ">React</span><span class="pln"> </span><span class="typ">Form</span><span class="pln"> </span><span class="typ">Validation</span><span class="pln"> </span><span class="typ">Demo</span><span class="pun">&lt;/</span><span class="pln">h2</span><span class="pun">&gt;</span><br><span class="pln">        </span><span class="pun">&lt;/</span><span class="pln">div</span><span class="pun">&gt;</span><br><span class="pln">        </span><span class="pun">&lt;</span><span class="typ">Form</span><span class="pln"> </span><span class="pun">/&gt;</span><span class="pln"> </span><span class="com">// компонент формы</span><br><span class="pln">      </span><span class="pun">&lt;/</span><span class="pln">div</span><span class="pun">&gt;</span><br><span class="pln">    </span><span class="pun">);</span><br><span class="pln">  </span><span class="pun">}</span><br><span class="pun">}</span></pre>
<pre class="prettyprint prettyprinted"><span class="kwd">export</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="typ">App</span><span class="pun">;</span></pre>
<p class="graf graf--p">Создадим компонент Form в <strong class="markup--strong markup--p-strong">src/Form.js. </strong>Мы сделаем простую форму с полями для ввода электронной почты и пароля. Добавим кнопку отправки формы.</p>
<pre class="prettyprint prettyprinted"><span class="kwd">import</span><span class="pln"> </span><span class="typ">React</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">Component</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="pun">‘</span><span class="pln">react</span><span class="pun">’;</span><br><span class="kwd">import</span><span class="pln"> </span><span class="pun">‘./</span><span class="typ">Form</span><span class="pun">.</span><span class="pln">css</span><span class="pun">’;</span></pre>
<pre class="prettyprint prettyprinted"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Form</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Component</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln"> render </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">   </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><br><span class="pln">     </span><span class="pun">&lt;</span><span class="pln">form className</span><span class="pun">=”</span><span class="pln">demoForm</span><span class="pun">”&gt;</span><br><span class="pln">       </span><span class="str">&lt;h2&gt;</span><span class="typ">Sign</span><span class="pln"> up</span><span class="pun">&lt;/</span><span class="pln">h2</span><span class="pun">&gt;</span><br><span class="pln">       </span><span class="pun">&lt;</span><span class="pln">div className</span><span class="pun">=”</span><span class="pln">form</span><span class="pun">-</span><span class="kwd">group</span><span class="pun">”&gt;</span><br><span class="pln">         </span><span class="pun">&lt;</span><span class="pln">label htmlFor</span><span class="pun">=”</span><span class="pln">email</span><span class="pun">”&gt;</span><span class="typ">Email</span><span class="pln"> address</span><span class="pun">&lt;/</span><span class="pln">label</span><span class="pun">&gt;</span><br><span class="pln">         </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=”</span><span class="pln">email</span><span class="pun">”</span><span class="pln"> className</span><span class="pun">=”</span><span class="pln">form</span><span class="pun">-</span><span class="pln">control</span><span class="pun">”</span><br><span class="pln">           name</span><span class="pun">=”</span><span class="pln">email</span><span class="pun">”</span><span class="pln"> </span><span class="pun">/&gt;</span><br><span class="pln">       </span><span class="pun">&lt;/</span><span class="pln">div</span><span class="pun">&gt;</span><br><span class="pln">       </span><span class="pun">&lt;</span><span class="pln">div className</span><span class="pun">=”</span><span class="pln">form</span><span class="pun">-</span><span class="kwd">group</span><span class="pun">”&gt;</span><br><span class="pln">         </span><span class="pun">&lt;</span><span class="pln">label htmlFor</span><span class="pun">=”</span><span class="pln">password</span><span class="pun">”&gt;</span><span class="typ">Password</span><span class="pun">&lt;/</span><span class="pln">label</span><span class="pun">&gt;</span><br><span class="pln">         </span><span class="pun">&lt;</span><span class="pln">input type</span><span class="pun">=”</span><span class="pln">password</span><span class="pun">”</span><span class="pln"> className</span><span class="pun">=”</span><span class="pln">form</span><span class="pun">-</span><span class="pln">control</span><span class="pun">”</span><br><span class="pln">           name</span><span class="pun">=”</span><span class="pln">password</span><span class="pun">”</span><span class="pln"> </span><span class="pun">/&gt;</span><br><span class="pln">       </span><span class="pun">&lt;/</span><span class="pln">div</span><span class="pun">&gt;</span><br><span class="pln">       </span><span class="pun">&lt;</span><span class="pln">button type</span><span class="pun">=”</span><span class="pln">submit</span><span class="pun">”</span><span class="pln"> className</span><span class="pun">=”</span><span class="pln">btn btn</span><span class="pun">-</span><span class="pln">primary</span><span class="pun">”&gt;</span><br><span class="pln">          </span><span class="typ">Sign</span><span class="pln"> up</span><br><span class="pln">       </span><span class="pun">&lt;/</span><span class="pln">button</span><span class="pun">&gt;</span><br><span class="pln">     </span><span class="pun">&lt;/</span><span class="pln">form</span><span class="pun">&gt;</span><br><span class="pln">   </span><span class="pun">)</span><br><span class="pln"> </span><span class="pun">}</span><br><span class="pun">}</span><br><span class="kwd">export</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="typ">Form</span><span class="pun">;</span></pre>
<p class="graf graf--p">Я копировал пример формы из примера в Bootstrap, так как она смотрится довольно неплохо.</p>
<p class="graf graf--p">Но я сделал некоторые изменения, чтобы форма работала с JSX. Так слова <code class="markup--code markup--p-code">class</code><em class="markup--em markup--p-em"> </em> и <code class="markup--code markup--p-code">for</code> зарезервированы в JavaScript, поэтому мы должны использовать <code class="markup--code markup--p-code">className</code> и<em class="markup--em markup--p-em"> </em><code class="markup--code markup--p-code">htmlFor</code><em class="markup--em markup--p-em"> </em>взамен них, соответственно.</p>
<p class="graf graf--p">Также необходимо убедиться, что все теги закрыты, включая <code class="markup--code markup--p-code">input</code>&nbsp;.</p>
<p class="graf graf--p">Добавим начальное значение <code class="markup--code markup--p-code">state</code>в конструктор:</p>
<pre class="prettyprint prettyprinted"><span class="kwd">constructor</span><span class="pln"> </span><span class="pun">(</span><span class="pln">props</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">  </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">props</span><span class="pun">);</span><br><span class="pln">  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">state </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">    email</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><br><span class="pln">    password</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><br><span class="pln">  </span><span class="pun">}</span><br><span class="pun">}</span></pre>
<p class="graf graf--p">Мы установили значения по умолчанию <code class="markup--code markup--p-code">email</code>и <code class="markup--code markup--p-code">password</code>в виде пустых строк.</p>
<p class="graf graf--p">Подключим поля вводя к значениям <code class="markup--code markup--p-code">state</code>&nbsp;, для почты:</p>
<pre class="prettyprint prettyprinted"><span class="kwd">value</span><span class="pun">={</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">state</span><span class="pun">.</span><span class="pln">email</span><span class="pun">}</span></pre>
<p class="graf graf--p">и пароля:</p>
<pre class="prettyprint prettyprinted"><span class="kwd">value</span><span class="pun">={</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">state</span><span class="pun">.</span><span class="pln">password</span><span class="pun">}</span></pre>
<p class="graf graf--p">Если мы сейчас будем вводить текст в поля, то значение состояния компонента не будет обновляться. Добавим обработчик <code class="markup--code markup--p-code">onChange</code> для полей ввода:</p>
<pre class="prettyprint prettyprinted"><span class="pln">onChange</span><span class="pun">={</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">handleUserInput</span><span class="pun">}</span></pre>
<p class="graf graf--p">Добавим логику обработчика:</p>
<pre class="prettyprint prettyprinted"><span class="pln">handleUserInput </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">  </span><span class="kwd">const</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><br><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">value</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">.</span><span class="kwd">value</span><span class="pun">;</span><br><span class="pln">  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">setState</span><span class="pun">({[</span><span class="pln">name</span><span class="pun">]:</span><span class="pln"> </span><span class="kwd">value</span><span class="pun">});</span><br><span class="pun">}</span></pre>
<p class="graf graf--p">Отлично. Теперь перейдем к самой проверке.</p>
<p class="graf graf--p">Будем хранить сообщения и код ошибок при вводе данных в <code class="markup--code markup--p-code">state</code>. Добавим несколько свойств для первоначального состояния:</p>
<pre class="prettyprint prettyprinted"><span class="kwd">constructor</span><span class="pln"> </span><span class="pun">(</span><span class="pln">props</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">  </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">props</span><span class="pun">);</span><br><span class="pln">  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">state </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">    email</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><br><span class="pln">    password</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><br><span class="pln">    formErrors</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">email</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> password</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">},</span><br><span class="pln">    emailValid</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><br><span class="pln">    passwordValid</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><br><span class="pln">    formValid</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><br><span class="pln">  </span><span class="pun">}</span><br><span class="pun">}</span></pre>
<p class="graf graf--p">Свойство <code class="markup--code markup--p-code">formError</code> содержит объект, который состоит из названия полей в качестве ключей и информации об ошибке в качестве значения. Первоначальное значение для каждого ключа является пустой строкой.</p>
<p class="graf graf--p">Также еще добавили три свойства типа <code class="markup--code markup--p-code">boolean</code>—<code class="markup--code markup--p-code">emailValid, passwordValid, formValid</code>&nbsp;, которые зависят от валидации отдельного поля и активности кнопки для отправки формы. Установим эти значения по умолчанию в <code class="markup--code markup--p-code">false</code>.</p>
<p class="graf graf--p">Добавим новый компонент <code class="markup--code markup--p-code">FormErrors </code>для отображения ошибок валидации над формой:</p>
<pre class="prettyprint prettyprinted"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">className</span><span class="pun">=</span><span class="atv">”panel</span><span class="pln"> </span><span class="atn">panel-default</span><span class="pln">”</span><span class="tag">&gt;</span><br><span class="pln"> </span><span class="tag">&lt;FormErrors</span><span class="pln"> </span><span class="atn">formErrors</span><span class="pun">=</span><span class="atv">{this.state.formErrors}</span><span class="pln"> </span><span class="tag">/&gt;</span><br><span class="tag">&lt;/div&gt;</span></pre>
<p class="graf graf--p">Сохраним компонент в файле <strong class="markup--strong markup--p-strong">src/FormErrors.js</strong>:</p>
<pre class="prettyprint prettyprinted"><span class="kwd">import</span><span class="pln"> </span><span class="typ">React</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="pun">‘</span><span class="pln">react</span><span class="pun">’;</span></pre>
<pre class="prettyprint prettyprinted"><span class="kwd">export</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">FormErrors</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">({</span><span class="pln">formErrors</span><span class="pun">})</span><span class="pln"> </span><span class="pun">=&gt;</span><br><span class="pln">  </span><span class="pun">&lt;</span><span class="pln">div className</span><span class="pun">=</span><span class="str">'formErrors'</span><span class="pun">&gt;</span><br><span class="pln">    </span><span class="pun">{</span><span class="typ">Object</span><span class="pun">.</span><span class="pln">keys</span><span class="pun">(</span><span class="pln">formErrors</span><span class="pun">).</span><span class="pln">map</span><span class="pun">((</span><span class="pln">fieldName</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">formErrors</span><span class="pun">[</span><span class="pln">fieldName</span><span class="pun">].</span><span class="pln">length </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">){</span><br><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><br><span class="pln">          </span><span class="pun">&lt;</span><span class="pln">p key</span><span class="pun">={</span><span class="pln">i</span><span class="pun">}&gt;{</span><span class="pln">fieldName</span><span class="pun">}</span><span class="pln"> </span><span class="pun">{</span><span class="pln">formErrors</span><span class="pun">[</span><span class="pln">fieldName</span><span class="pun">]}&lt;/</span><span class="pln">p</span><span class="pun">&gt;</span><br><span class="pln">        </span><span class="pun">)</span><span class="pln">        </span><br><span class="pln">      </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span><br><span class="pln">      </span><span class="pun">}</span><br><span class="pln">    </span><span class="pun">})}</span><br><span class="pln">  </span><span class="pun">&lt;/</span><span class="pln">div</span><span class="pun">&gt;</span></pre>
<p class="graf graf--p">Это простой функциональный компонент, который принимает объект <code class="markup--code markup--p-code">formError</code> и возвращает объект содержащий JSX с сообщениями об ошибке, либо пустую строку.</p>
<p class="graf graf--p">Теперь мы можем запускать проверку как только пользователь начинает заполнять поля.</p>
<p class="graf graf--p">Метод <code class="markup--code markup--p-code">setState</code> принимает функцию обратного вызова в качестве второго аргумента, в которую можно передать функцию проверки:</p>
<pre class="prettyprint prettyprinted"><span class="pln">handleUserInput </span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">  </span><span class="kwd">const</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">.</span><span class="pln">name</span><span class="pun">;</span><br><span class="pln">  </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">value</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">target</span><span class="pun">.</span><span class="kwd">value</span><span class="pun">;</span><br><span class="pln">  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">setState</span><span class="pun">({[</span><span class="pln">name</span><span class="pun">]:</span><span class="pln"> </span><span class="kwd">value</span><span class="pun">},</span><span class="pln"> </span><br><span class="pln">                </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">validateField</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">});</span><br><span class="pun">}</span></pre>
<p class="graf graf--p">Объявим эту функцию:</p>
<pre class="prettyprint prettyprinted"><span class="pln">validateField</span><span class="pun">(</span><span class="pln">fieldName</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">  </span><span class="kwd">let</span><span class="pln"> fieldValidationErrors </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">state</span><span class="pun">.</span><span class="pln">formErrors</span><span class="pun">;</span><br><span class="pln">  </span><span class="kwd">let</span><span class="pln"> emailValid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">state</span><span class="pun">.</span><span class="pln">emailValid</span><span class="pun">;</span><br><span class="pln">  </span><span class="kwd">let</span><span class="pln"> passwordValid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">state</span><span class="pun">.</span><span class="pln">passwordValid</span><span class="pun">;</span></pre>
<pre class="prettyprint prettyprinted"><span class="kwd">switch</span><span class="pun">(</span><span class="pln">fieldName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">    </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'email'</span><span class="pun">:</span><br><span class="pln">      emailValid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">value</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="str">/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/</span><span class="pln">i</span><span class="pun">);</span><br><span class="pln">      fieldValidationErrors</span><span class="pun">.</span><span class="pln">email </span><span class="pun">=</span><span class="pln"> emailValid </span><span class="pun">?</span><span class="pln"> </span><span class="str">''</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">' is invalid'</span><span class="pun">;</span><br><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span><br><span class="pln">    </span><span class="kwd">case</span><span class="pln"> </span><span class="str">'password'</span><span class="pun">:</span><br><span class="pln">      passwordValid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">value</span><span class="pun">.</span><span class="pln">length </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">6</span><span class="pun">;</span><br><span class="pln">      fieldValidationErrors</span><span class="pun">.</span><span class="pln">password </span><span class="pun">=</span><span class="pln"> passwordValid </span><span class="pun">?</span><span class="pln"> </span><span class="str">''</span><span class="pun">:</span><span class="pln"> </span><span class="str">' is too short'</span><span class="pun">;</span><br><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span><br><span class="pln">    </span><span class="kwd">default</span><span class="pun">:</span><br><span class="pln">      </span><span class="kwd">break</span><span class="pun">;</span><br><span class="pln">  </span><span class="pun">}</span><br><span class="pln">  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">setState</span><span class="pun">({</span><span class="pln">formErrors</span><span class="pun">:</span><span class="pln"> fieldValidationErrors</span><span class="pun">,</span><br><span class="pln">                  emailValid</span><span class="pun">:</span><span class="pln"> emailValid</span><span class="pun">,</span><br><span class="pln">                  passwordValid</span><span class="pun">:</span><span class="pln"> passwordValid</span><br><span class="pln">                </span><span class="pun">},</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">validateForm</span><span class="pun">);</span><br><span class="pun">}</span></pre>
<pre class="prettyprint prettyprinted"><span class="pln">validateForm</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">  </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">setState</span><span class="pun">({</span><span class="pln">formValid</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">state</span><span class="pun">.</span><span class="pln">emailValid </span><span class="pun">&amp;&amp;</span><br><span class="pln">                            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">state</span><span class="pun">.</span><span class="pln">passwordValid</span><span class="pun">});</span><br><span class="pun">}</span></pre>
<p class="graf graf--p">Здесь мы имеем две проверки. Для поля электронной почты проверка осуществляется при помощи регулярного выражения.</p>
<p class="graf graf--p"><em class="markup--em markup--p-em">Отмечу: я использую пример регулярного выражения из Devise library. Проверка электронной почты достаточно сложная задача, но для нашего примера этого будет достаточно.</em></p>
<p class="graf graf--p">Поле для ввода пароля проверяем на количество введенных символов. Минимальное количество 6 символов. Если менее, то выдаем ошибку.</p>
<p class="graf graf--p">Если поле не прошло проверку, то мы записываем сообщение об ошибке для данного поля и устанавливаем свойство прохождения проверки в <code class="markup--code markup--p-code">false</code>&nbsp;.</p>
<p class="graf graf--p">Затем вызываем <code class="markup--code markup--p-code">setState</code> для обновления <code class="markup--code markup--p-code">formErrors</code> и свойства прохождения проверки ( <code class="markup--code markup--p-code">emailValid или passwordValid</code> ). Далее отправляем функцию обратного вызова <code class="markup--code markup--p-code">validateForm</code> для установки значения <code class="markup--code markup--p-code">formValid</code>&nbsp;.</p>
<p class="graf graf--p">Добавить атрибут <code class="markup--code markup--p-code">disable</code> для кнопки отправки. Значение атрибута зависит от значения <code class="markup--code markup--p-code">formValid</code> в <code class="markup--code markup--p-code">state</code>&nbsp;.</p>
<pre class="prettyprint prettyprinted"><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"submit"</span><span class="pln"> </span><span class="atn">className</span><span class="pun">=</span><span class="atv">"btn btn-primary"</span><br><span class="pln">  </span><span class="atn">disabled</span><span class="pun">=</span><span class="atv">{!this.state.formValid}</span><span class="tag">&gt;</span><span class="pln">Sign up</span><span class="tag">&lt;/button&gt;</span></pre>
<p class="graf graf--p">Теперь наша простая форма будет иметь проверку ввода данных.</p>
<p class="graf graf--p">Можно немного улучшить форму, добавив подсветку поля, которое не прошло валидацию. Для этого добавим полю класс Bootstrap<code class="markup--code markup--p-code">has-error</code> в добавок в классу <code class="markup--code markup--p-code">form-group</code>&nbsp;.&nbsp;</p>
<pre class="prettyprint prettyprinted"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">className</span><span class="pun">=</span><span class="atv">{`form-group</span><br><span class="pln">                 ${</span><span class="atn">this</span><span class="pln">.</span><span class="atn">errorClass</span><span class="pln">(</span><span class="atn">this</span><span class="pln">.</span><span class="atn">state</span><span class="pln">.</span><span class="atn">formErrors</span><span class="pln">.</span><span class="atn">email</span><span class="pln">)}`}</span><span class="tag">&gt;</span></pre>
<p class="graf graf--p">Метод <code class="markup--code markup--p-code">errorClass</code> определим как:</p>
<pre class="prettyprint prettyprinted"><span class="pln">errorClass</span><span class="pun">(</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br><span class="pln">   </span><span class="kwd">return</span><span class="pun">(</span><span class="pln">error</span><span class="pun">.</span><span class="pln">length </span><span class="pun">===</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="str">''</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">'has-error'</span><span class="pun">);</span><br><span class="pun">}</span></pre>
<p class="graf graf--p">Теперь поле не прошедшее проверку получает красное обрамление вокруг.</p>
<p class="graf graf--p">Как-то так.</p>
<p>
